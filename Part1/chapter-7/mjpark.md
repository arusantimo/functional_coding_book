# 신뢰할 수 없는 코드를 쓰면서 불변성 지키기

## 방어적 복사

레거시 코드(불변성이 지켜지지 않은)나 외부 라이브러리를 사용하는 경우에 불변성을 지키는 방법

1. 데이터가 안전한 코드에서 나갈 때 복사하기 (Deep Copy)
2. 안전한 코드로 데이터가 들어올 때 복사하기(Deep Copy)

<code> Copy-on-write는 얕은 복사이기 때문에 비용이 적게 듬
방어적 복사(Deep copy)는 중첩된 데이터를 모두 복사하기 때문에 비쌈</code>

Q) 내부적으로 Copy-on-Write가 지켜졌는지 어떻게 보장을 하지??
언어가 기능을 제공해주지 않으면 사용하기 힘든건지......
