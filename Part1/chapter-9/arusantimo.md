# 계층 설계 - 2

## 추상화의벽 (캡슐화)

- 함수형에서도 계층간의 이동에서 불필요한 정보를 노출할 필요는 없음.
- 같은 레벨 스콥 안에서는 데이터 구조를 목적에 맞게 변경하면서 처리하는게 더 효과적임. 하지만 계층 이동간 인터페이스는 맞춰야함.

### FE 개발에서의 예시

- 커스텀 훅
- 추상화된 공용 컴포넌트

### 고려할사항 혹은 단점

- 본인이 고려하는 코드 이외에는 고려하지 않아도 되기 떄문에 캡술화된 코드에 문제가 있어서 고쳐야 할때 비용 많이듬.

---

## 작은 인터페이스 (비지니스 로직) (어댑터 패턴)

- 추상화의 벽 레벨에 작성을 하면 추상화의 벽은 의존성이 높을 코드레벨이기 떄문에 수정이 많이지게 되어 좋지 않음

### FE 개발시

- 커스텀 훅에 비지니스 로직이 들어가면, 혹은 특정 상황에 대한 의존성이 들어가면 사용하기 힘들어짐.
- 비지니스 로직은 왠만하면 서버에서 처리하던가, 혹은 따로 조건식 필터링 함수로 빼서 관리하도록 한다.

---

## 편리한 계층

- 이상적인 추상화는 현실적으로 어렵다. ㅋㅋㅋ 재사용성, 테스트용이 한 구조로 계층설계를 현실적으로 하면좋음.


### 테스트 코드 작성 논의

- 낮은 레벨의 코드 테스트 OK
- 하지만 우리가 핸들링하는 레벨까지만 한다. (라이브러리, 언어, 브라우저)등에 대한 코드는 하지 않음.
- 개인적으로는 결국 가장 높은 레벨 테스트도 해야한다고 생각한다. 비지니스 적으로 가장 중요한 곳이 때문이다.  우리가 작성한 코드는 여러가지 요소의 영향을 받는다.  
그러므로 낮은 레벨의 코드가 테스트 유지보수성이나 작성비용이 낮다고 해서 우선순위는 높다고 보지 않는다. 테스트는 내가 예측하지 못하는것을 알아내는게 더 가치 있다고 개인적으로 생각한다.   
그러므로, 여러가지 환경에 따라 어떻게 동작할지 모르는 것에 대한 테스트도 진행되어야 한다고 생각한다.




