중첩첩된 리턴 구분이 있는 코드를 해결하는 방법

## 체인을 명확하게 만들기

1. 단계에 이름 붙이기

- 각 단계별로 이름을 붙여 별도의 함수로 분리하는 방법

2. 콜백에 이름 붙이기

- 단계대신 콜백에 이름을 붙여 별도의 함수로 분리하는 방법

> 일반적으로는 고차함수를 그만 사용하는 것보다 이름을 붙여 사용하는 #2 방법이 더 재사용하기 좋다

### 최적화 방법

filter, map은 호출할 때 마다 새로운 배열을 만들기 때문에 비효율적인 경우가 있다.
값 하나에 map()을 단계별로 나눠서 사용하기 보다 하나로 사용하면 가비지 컬렉션을 적게함.
단, 최적화의 경우에만 사용하는 것이 좋고 그게 아니라면 여러 단계를 사용하는 것이 가독성이 좋다

## 반복문을 함수형 도구로 리팩토링 하기

1. 데이터 만들기

- 데이터를 배열에 넣으면 함수형 도구를 사용할 수 있다.

2. 배열 전체를 다루기

- 하위 배열을 만들어서 배열 전체에 사용하는 함수형 도구를 사용

3. 작은 단계로 다루기

- 한 번에 너무 많은 일을 한다면 단순한 단계로 나눠보기

### 다양한 함수형 도구

함수형 언어의 표준 라이브러리에 있는 다양한 함수형 도구들

- pluck()

```javascript
const pluck = (arr, key) => arr.map((i) => i[key]);
const simpsons = [
  { name: "lisa", age: 8 },
  { name: "homer", age: 36 },
  { name: "marge", age: 34 },
  { name: "bart", age: 10 },
];
pluck(simpsons, "age"); // [8, 36, 34, 10]
```

- groupBy()

```javascript
const numbers = [1, 2, 2, 3, 3, 3];
const result = numbers.groupBy((number) => number);

console.log(result);
// 1: Array [ 1 ]
// 2: Array [ 2, 2 ]
// 3: Array(3) [ 3, 3, 3 ]
```
